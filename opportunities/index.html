<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="colorlib.com">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Sign Up Form</title>

    <!-- Font Icon -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">
    <link rel="stylesheet" href="vendor/boostrap/bootstrap.min.css">
    <link rel="stylesheet" href="vendor/acc-wizard-master/release/acc-wizard.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"
        integrity="sha512-VZ6m0F78+yo3sbu48gElK4irv2dzPoep8oo9LEjxviigcnnnNvnTOJRSrIhuFk68FMLOpiNz+T77nNY89rnWDg=="
        crossorigin="anonymous"></script>
    <script src="../../config.js"></script>

    <!-- Main css -->
    <link rel="stylesheet" href="css/style.css">


</head>

<body onload="_funcFetchCategories()">
    <div class="stickyHeader">

        <div class="heading-form">
            Wrap Up Eventz
        </div>
        <label class="heading-form-label">Please fill out this field</label>
    </div>
    <div class="main">
        <div class="container" id="fill-category">
            <fieldset>

                <div class="form-row">


                    <div class="form-select" style="width: 100%; text-align: center;">
                        <h1>Please select your profile</h1>
                        <div class="select">
                            <select name="slct" id="category-select">
                                <option selected disabled>Choose an option</option>

                            </select>
                        </div>

                        <button class="continue-application" onclick="handleCategory()">
                            <div>
                                <div class="pencil"></div>
                                <div class="folder">
                                    <div class="top">
                                        <svg viewBox="0 0 24 27">
                                            <path
                                                d="M1,0 L23,0 C23.5522847,-1.01453063e-16 24,0.44771525 24,1 L24,8.17157288 C24,8.70200585 23.7892863,9.21071368 23.4142136,9.58578644 L20.5857864,12.4142136 C20.2107137,12.7892863 20,13.2979941 20,13.8284271 L20,26 C20,26.5522847 19.5522847,27 19,27 L1,27 C0.44771525,27 6.76353751e-17,26.5522847 0,26 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z">
                                            </path>
                                        </svg>
                                    </div>
                                    <div class="paper"></div>
                                </div>
                            </div>
                            Continue Application
                        </button>

                        <!-- dribbble - twitter -->
                        <a class="dribbble" href="https://dribbble.com/ai" target="_blank"><img
                                src="https://cdn.dribbble.com/assets/dribbble-ball-mark-2bd45f09c2fb58dbbfb44766d5d1d07c5a12972d602ef8b32204d28fa3dda554.svg"
                                alt=""></a>
                        <a class="twitter" target="_blank" href="https://twitter.com/aaroniker_me"><svg
                                xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 72 72">
                                <path
                                    d="M67.812 16.141a26.246 26.246 0 0 1-7.519 2.06 13.134 13.134 0 0 0 5.756-7.244 26.127 26.127 0 0 1-8.313 3.176A13.075 13.075 0 0 0 48.182 10c-7.229 0-13.092 5.861-13.092 13.093 0 1.026.118 2.021.338 2.981-10.885-.548-20.528-5.757-26.987-13.679a13.048 13.048 0 0 0-1.771 6.581c0 4.542 2.312 8.551 5.824 10.898a13.048 13.048 0 0 1-5.93-1.638c-.002.055-.002.11-.002.162 0 6.345 4.513 11.638 10.504 12.84a13.177 13.177 0 0 1-3.449.457c-.846 0-1.667-.078-2.465-.231 1.667 5.2 6.499 8.986 12.23 9.09a26.276 26.276 0 0 1-16.26 5.606A26.21 26.21 0 0 1 4 55.976a37.036 37.036 0 0 0 20.067 5.882c24.083 0 37.251-19.949 37.251-37.249 0-.566-.014-1.134-.039-1.694a26.597 26.597 0 0 0 6.533-6.774z">
                                </path>
                            </svg></a>
                    </div>

                </div>



            </fieldset>
        </div>
        <div class="container fill-form" id="fill-form">
            <div class="acc-wizard" id="signup-form">
                <div class="panel-group" id="accordion">
                    <div class="panel panel-default active">
                        <div class="panel-heading" id="headingOne">
                            <h3>
                                <a href="#collapseOne" data-toggle="collapse" data-parent="#accordion">Basic
                                    infomation</a>
                            </h3>
                        </div>

                        <div id="collapseOne" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <form method="post" action="javascript:void(0)" id="form" onsubmit="return window.location.hash='collapseTwo'">
                                    <fieldset>

                                        <div class="form-row">
                                            <!-- <div class="form-group"> -->
                                            <!-- profile image -->

                                            <!-- <div class="container"> -->

                                            <div class="avatar-upload" id="avatar-upload">
                                                <div class="avatar-edit">
                                                    <input type='file' id="imageUpload" name="file-upload"
                                                        accept=".png, .jpg, .jpeg" onchange="readURL(this);"  />
                                                    <label class="profilelabel" for="imageUpload"></label>
                                                </div>
                                                <div class="avatar-preview">
                                                    <div id="imagePreview"
                                                        style="background-image: url(../images/icons/profileImage_placeholder.png);">
                                                    </div>
                                                </div>
                                                <div class="error-profile-upload" id="avatar-upload-error-message">
                                                    <span class="error1">
                                                        <i class="error-log fa fa-exclamation-triangle"></i>
                                                        Your Picture is required
                                                    </span>

                                                </div>
                                                <!-- </div> -->
                                            </div>

                                            <!--  -->
                                            <!-- </div> -->
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="name" class="form-label">First name</label>
                                                <input type="text" name="first_name" id="name" required
                                                    placeholder="E.g Nguyen" />
                                            </div>

                                            <div class="form-group">
                                                <label for="email" class="form-label">Your Email</label>
                                                <input type="email" name="email" id="email" required
                                                    placeholder="E.g. john123@gmail.com" />
                                            </div>
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group-flex">
                                                <div class="form-radio">
                                                    <label for="gender">Gender</label>
                                                    <div class="form-flex">
                                                        <input type="radio" name="gender" value="male" id="male"
                                                             required/>
                                                        <label for="male"><img src="images/icon-male.png"
                                                                alt="Male"></label>

                                                        <input type="radio" name="gender" value="female" id="female" />
                                                        <label for="female"><img src="images/icon-female.png"
                                                                alt="Female"></label>
                                                    </div>
                                                </div>
                                                <div class="form-date">
                                                    <label for="dob" class="form-label">Date of birth</label>
                                                    <input type="date" name="dob" id="dob"
                                                        placeholder="E.g. Kardashian" required/>
                                                </div>
                                            </div>

                                            <!-- <div class="form-select">
                                                <label for="national" class="form-label">Nationality</label>
                                                <div class="select-group">

                                                    <select name="national" id="national">
                                                        <option value="" data-url='images/icon-vietnam.png'><img src="images/icon-vietnam.png" alt=""> Viet Nam</option>
                                                        <option value="Viet Nam" data-url='images/icon-vietnam.png'><img src="images/icon-vietnam.png" alt=""> Viet Nam</option>
                                                        <option value="USA" data-url='images/icon-usa.png'><img src="images/icon-usa.png" alt="">USA</option>
                                                    </select>
                                                </div>
                                            </div> -->
                                            <div class="form-group">
                                                <label for="mobile" class="form-label">Phone Number</label>
                                                <input type="number" name="mobile" id="mobile"
                                                    placeholder="(+ 123 ) 456 789" required/>
                                            </div>
                                        </div>
                                        <!-- <div class="form-row">
                                            <div class="form-group">
                                                <label for="email" class="form-label">Your Email</label>
                                                <input type="email" name="email" id="email" placeholder="E.g. john123@gmail.com"/>
                                            </div>
                        
                                            <div class="form-group">
                                                <label for="phone" class="form-label">Phone Number</label>
                                                <input type="number" name="phone" id="phone" placeholder="(+ 123 ) 456 789"/>
                                            </div>
                                        </div> -->

                                        <div class="form-row">
                                            <div class="form-group">
                                                <!-- <label for="city_state" class="form-label">City</label>
                                                <input type="text" name="city_state" id="city_state"
                                                    placeholder="Eg. Ha Noi" /> -->
                                                <div class="form-select">
                                                    <label for="national" class="form-label">Nationality</label>
                                                    <div class="select-group">

                                                        <select name="national" id="national" required >
                                                            <option value="" data-url='images/icon-vietnam.png'><img
                                                                    src="images/icon-vietnam.png" alt=""> Select
                                                            </option>
                                                            <option value="Viet Nam" data-url='images/icon-vietnam.png'>
                                                                <img src="images/icon-vietnam.png" alt=""> Viet Nam
                                                            </option>
                                                            <option value="USA" data-url='images/icon-usa.png'><img
                                                                    src="images/icon-usa.png" alt="">USA</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="pincode" class="form-label">Pincode</label>
                                                <input type="number" name="pincode" id="pincode" required/>
                                            </div>
                                        </div>
                                    </fieldset>
                                    
                                    <div class="form-submit">
                                        <input type="submit" id="nextSubmit" value="Next" class="au-btn" >
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" id="headingTwo">
                            <h3>
                                <a href="#collapseTwo" data-toggle="collapse" data-parent="#accordion">Additional
                                    infomation</a>
                            </h3>
                        </div>
                        <div id="collapseTwo" class="panel-collapse collapse">
                            <div class="panel-body">
                                <form method="post" id="stepper-2" action="javascript:void(0)"
                                    onsubmit="handleSubmit()">
                                    <fieldset id="collapse-22">
                                        <!-- <div class="form-row">
                                            <div class="form-group">
                                                <label for="email" class="form-label">Your Email</label>
                                                <input type="email" name="email" id="email"
                                                    placeholder="E.g. john123@gmail.com" />
                                            </div>

                                            <div class="form-group">
                                                <label for="phone" class="form-label">Phone Number</label>
                                                <input type="number" name="phone" id="phone"
                                                    placeholder="(+ 123 ) 456 789" />
                                            </div>
                                        </div> -->

                                        <!-- <div class="form-row">
                                            <div class="form-group">
                                                <label for="city" class="form-label">City</label>
                                                <input type="text" name="city" id="city" placeholder="Eg. Ha Noi" />
                                            </div>

                                            <div class="form-group">
                                                <label for="pincode" class="form-label">Pincode</label>
                                                <input type="number" name="pincode" id="pincode" />
                                            </div>
                                        </div> -->
                                    </fieldset>
                                    <div class="form-submit">
                                        <input type="submit" id="close" value="Submit" class="au-btn">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="panel panel-default">
                        <div class="panel-heading" id="headingTwo">
                            <h3>
                                <a href="#collapse4" data-toggle="collapse" data-parent="#accordion">Additional
                                    infomation</a>
                            </h3>
                        </div>
                        <div id="collapse4" class="panel-collapse collapse">
                            <div class="panel-body">
                                <form method="post">
                                    <fieldset>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="email" class="form-label">Your Email</label>
                                                <input type="email" name="email" id="email"
                                                    placeholder="E.g. john123@gmail.com" />
                                            </div>

                                            <div class="form-group">
                                                <label for="phone" class="form-label">Phone Number</label>
                                                <input type="number" name="phone" id="phone"
                                                    placeholder="(+ 123 ) 456 789" />
                                            </div>
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="city" class="form-label">City</label>
                                                <input type="text" name="city" id="city" placeholder="Eg. Ha Noi" />
                                            </div>

                                            <div class="form-group">
                                                <label for="pincode" class="form-label">Pincode</label>
                                                <input type="number" name="pincode" id="pincode" />
                                            </div>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div> -->
                    <!-- <div class="panel panel-default">
                        <div class="panel-heading" id="headingThree">
                            <h3>
                                <a href="#collapseThree" data-toggle="panel-collapse"
                                    data-parent="#accordion">Specialities</a>
                            </h3>
                        </div>
                        <div id="collapseThree" class="panel-collapse collapse">
                            <div class="panel-body">
                                <form method="post">
                                    <fieldset>
                                        <div class="form-group">
                                            <label for="specialities" class="form-label">Tell us your
                                                specialities</label>
                                            <textarea name="specialities" id="specialities"
                                                placeholder="Eg. Iâ€™m very good at UI design ...."></textarea>
                                        </div>
                                    </fieldset>
                                    <div class="form-submit">
                                        <input type="submit" value="Submit" class="au-btn">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>

    </div>



    <script>

    </script>
     <!-- JS -->
     <script src="vendor/jquery/jquery.min.js"></script>
     <script src="vendor/boostrap/bootstrap.min.js"></script>
     <script src="vendor/acc-wizard-master/release/acc-wizard.min.js"></script>
     <script src="vendor/jquery-validation/dist/jquery.validate.min.js"></script>
     <script src="vendor/jquery-validation/dist/additional-methods.min.js"></script>
     <script src="vendor/jquery-steps/jquery.steps.min.js"></script>
     <script src="vendor/minimalist-picker/dobpicker.js"></script>
     <script src="js/main.js"></script>
    

    <!-- CATEGORY RELATED FUNCTIONS -->
    <script>
        // category-select
        const _funcFetchCategories = async () => {
            // $('#category-select').append(`<option value="${'optionValue'}"> 
            //                                    ${'optionText'} 
            //                               </option>`); 
            let _selectValue = document.getElementById('category-select')

            let body = { view_categories: true }
            await fetch(`${Api}api/createcategories`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(body)
            })
                .then(response => response.json())
                .then(async commits => {
                    console.log(commits, "commits")
                    if (await commits) {
                        return new Promise(async (resolve, reject) => {
                            const calls = commits.map((val) => {
                                $('#category-select').append(`<option value="${val._id}"> 
                                          ${val.type} 
                                     </option>`);
                            })
                            Promise.all(calls)
                                .then((data) => {
                                    console.log('s', data)
                                    resolve(data);
                                })
                                .catch((err) => {
                                    console.log(err);
                                });
                        });



                    }
                });


        }

        // SUBMIT CATEGORIES

        let ids = []
        // TO FETCH QUESTIONS
        const _fetchQuestions = async () => {
            // $('#category-select').append(`<option value="${'optionValue'}"> 
            //                                    ${'optionText'} 
            //                               </option>`); 
            let _selectValue = document.getElementById('category-select')
            // <div class="form-row">
            //                                 <div class="form-group">
            //                                     <label for="email" class="form-label">Your Email</label>
            //                                     <input type="email" name="email" id="email"
            //                                         placeholder="E.g. john123@gmail.com" />
            //                                 </div>

            //                                 <div class="form-group">
            //                                     <label for="phone" class="form-label">Phone Number</label>
            //                                     <input type="number" name="phone" id="phone"
            //                                         placeholder="(+ 123 ) 456 789" />
            //                                 </div>
            //                             </div>


            var _arr = []
            var _temp = []
            let body = { category_id: localStorage.getItem('_categoryId') }
            await fetch(`${Api}api/fetchquestions`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(body)
            })
                .then(response => response.json())
                .then(async commits => {
                    console.log(commits, "commits")
                    return new Promise(async (resolve, reject) => {
                        const calls = commits.map((val) => {
                            return val
                        })
                        Promise.all(calls)
                            .then(async (data) => {
                                await data.map((val, i) => {
                                    let obj = {}
                                    obj['type'] = val.field_json.type
                                    obj['id'] = val._id
                                    ids.push(obj)

                                    debugger
                                    // if (val.field_json.type === 'checkbox-group') {
                                    //     _temp.push('<div class="form-group">' +
                                    //                 '<label for="email" class="form-label">' +'Your Email'+'</label>'+
                                    //                 '<input type="checkbox" name="email" id="email"  value="sdfsdf"/>'+
                                    //                 '<label for="email">' +'Your Email'+'</label>'+
                                    //             '</div>')
                                    //             if((i+1) % 2 === 0){
                                    //    _arr.push('<div class="form-row">' + 
                                    //     _temp.join('')
                                    //     +'</div>')

                                    //     _temp = []
                                    // }
                                    // }
                                    if (val.field_json.type === 'date') {
                                        _temp.push('<div class="form-group">' +
                                            '<label for=' + val._id + ' class="form-label">' + val.field_json.label + '</label>' +
                                            '<input type=' + val.field_json.type + ' name="email" id=' + val._id + ' required placeholder="E.g. john123@gmail.com"/>' +
                                            '</div>')
                                        if ((_temp.length % 2 === 0)) {
                                            _arr.push('<div class="form-row">' +
                                                _temp.join('')
                                                + '</div>')

                                            _temp = []
                                        }
                                        else {
                                            if (data.length - 1 === i) {
                                                _arr.push('<div class="form-row">' +
                                                    _temp.join('')
                                                    + '</div>')

                                                _temp = []
                                            }
                                        }
                                    }
                                    else if (val.field_json.type === 'file') {
                                        _temp.push('<div class="form-group">' +
                                            '<label for=' + val._id + ' class="form-label">' + val.field_json.label + '</label>' +
                                            '<input type = ' + val.field_json.type + ' name="email" required multiple id=' + val._id + ' placeholder="E.g. john123@gmail.com" />' +
                                            '</div>')
                                        if ((_temp.length % 2 === 0)) {
                                            _arr.push('<div class="form-row">' +
                                                _temp.join('')
                                                + '</div>')

                                            _temp = []
                                        }
                                        else {
                                            if (data.length - 1 === i) {
                                                _arr.push('<div class="form-row">' +
                                                    _temp.join('')
                                                    + '</div>')

                                                _temp = []
                                            }
                                        }
                                    }
                                    else if (val.field_json.type === 'number') {
                                        _temp.push('<div class="form-group">' +
                                            '<label for=' + val._id + ' class="form-label">' + val.field_json.label + '</label>' +
                                            '<input type=' + val.field_json.type + ' required name="email"  id=' + val._id + ' placeholder="E.g. john123@gmail.com" onkeypress=' + disableInputs(this) + '/>' +
                                            '</div>')
                                        if ((_temp.length % 2 === 0)) {
                                            _arr.push('<div class="form-row">' +
                                                _temp.join('')
                                                + '</div>')

                                            _temp = []
                                        }
                                        else {
                                            if (data.length - 1 === i) {
                                                _arr.push('<div class="form-row">' +
                                                    _temp.join('')
                                                    + '</div>')

                                                _temp = []
                                            }
                                        }
                                    }
                                    else if (val.field_json.type === 'radio-group') {
                                        _temp.push('<div class="form-group">' +
                                            '<div class="form-radio" style="width:100%">' +
                                            '<label for=' + val._id + '> ' + val.field_json.label + '</label>' +
                                            '<div class="form-flex">' +
                                            val.field_json.values.map(subOptions => {
                                                return '<input type=radio required name=' + val._id + ' value=' + subOptions.value + ' id=' + subOptions.value + ' />' +
                                                    '<label for=' + subOptions.value + ' style="width:80%;margin:5px">' + subOptions.label + '</label>'
                                            }).join("")
                                            +
                                            // '<input type='+val.field_json.type+' name=' + val._id + ' value="female" id="f" />' +
                                            // '<label for="f">data</label>' +
                                            '</div>' +
                                            '</div>' +
                                            '</div>')


                                        if ((_temp.length % 2 === 0)) {
                                            _arr.push('<div class="form-row">' +
                                                _temp.join('')
                                                + '</div>')

                                            _temp = []
                                        }
                                        else {
                                            if (data.length - 1 === i) {
                                                _arr.push('<div class="form-row">' +
                                                    _temp.join('')
                                                    + '</div>')

                                                _temp = []
                                            }
                                        }
                                    }
                                    else if (val.field_json.type === 'select') {
                                        _temp.push('<div class="form-group">'+
                                                '<div class="form-select">'+
                                                    '<label for=' + val._id + ' class="form-label">' + val.field_json.label + '</label>'+
                                                    '<div class="select-group">' +
                                                        '<select name=' + val._id + ' id=' + val._id + '>'+
                                                          '  <option value="sdf" selected><img src="images/icon-vietnam.png" alt=""> Viet Nam</option>'+
                                                        '</select>'+
                                                    '</div>'+
                                                '</div>'+
                                        '</div>')
                                        // <div class="form-group">
                                                
                                        //         <div class="form-select">
                                        //             <label for="national" class="form-label">Nationality</label>
                                        //             <div class="select-group">

                                        //                 <select name="national" id="national">
                                        //                     <option value="" data-url='images/icon-vietnam.png'><img
                                        //                             src="images/icon-vietnam.png" alt=""> Viet Nam
                                        //                     </option>
                                        //                     <option value="Viet Nam" data-url='images/icon-vietnam.png'>
                                        //                         <img src="images/icon-vietnam.png" alt=""> Viet Nam
                                        //                     </option>
                                        //                     <option value="USA" data-url='images/icon-usa.png'><img
                                        //                             src="images/icon-usa.png" alt="">USA</option>
                                        //                 </select>
                                        //             </div>
                                        //         </div>
                                        //     </div>
                                        if ((_temp.length % 2 === 0)) {
                                            _arr.push('<div class="form-row">' +
                                                _temp.join('')
                                                + '</div>')

                                            _temp = []
                                        }
                                        else {
                                            if (data.length - 1 === i) {
                                                _arr.push('<div class="form-row">' +
                                                    _temp.join('')
                                                    + '</div>')

                                                _temp = []
                                            }
                                        }
                                    }
                                    else if (val.field_json.type === 'text') {
                                        _temp.push('<div class="form-group">' +
                                            '<label for=' + val._id + ' class="form-label">' + val.field_json.label + '</label>' +
                                            '<input type=' + val.field_json.type + ' name="email" id=' + val._id + ' placeholder="E.g. john123@gmail.com" />' +
                                            '</div>')
                                        if ((_temp.length % 2 === 0)) {
                                            _arr.push('<div class="form-row">' +
                                                _temp.join('')
                                                + '</div>')

                                            _temp = []
                                        }
                                        else {
                                            if (data.length - 1 === i) {
                                                _arr.push('<div class="form-row">' +
                                                    _temp.join('')
                                                    + '</div>')

                                                _temp = []
                                            }
                                        }
                                    }
                                    else if (val.field_json.type === 'textarea') {
                                        debugger
                                        _temp.push('<div class="form-group">' +
                                            '<label for=' + val._id + ' class="form-label">' + val.field_json.label + '</label>' +
                                            '<textarea id=' + val._id + ' name="w3review" rows="4" cols="50" placeholder="Enter here...">' + '</textarea>' +
                                            // '<input type='+val.field_json.type+' name="email" id=' + val._id + ' placeholder="E.g. john123@gmail.com" />' +
                                            '</div>')
                                        if ((_temp.length % 2 === 0)) {
                                            _arr.push('<div class="form-row">' +
                                                _temp.join('')
                                                + '</div>')

                                            _temp = []
                                        }
                                        else {
                                            if (data.length - 1 === i) {
                                                _arr.push('<div class="form-row">' +
                                                    _temp.join('')
                                                    + '</div>')

                                                _temp = []
                                            }
                                        }
                                    }

                                })
                                console.log("array", _arr)
                                document.getElementById("collapse-22").innerHTML += _arr.join("")
                                resolve(data);
                            })
                            .catch((err) => {
                                console.log(err);
                            });
                    });

                });


        }
        // 


        // 
        // PROFILE SUBMIT
        // 
        const handleSubmit = async() => {
            console.log(ids, "idsidsids");

            var formData = new FormData();
            const _getValue = (id) => {
                let _document = document.getElementById(id).value
                return _document
            }
            const _getFile = (id) => {
                let _document = document.getElementById(id).files.length
                // formData.append('file-upload', _document)
                // formData.append('question-id', id)
                for (var x = 0; x < _document; x++) {
                    formData.append(id, document.getElementById(id).files[x]);
                    formData.append('id', id);
                }
                console.log(_document,'_document_document')
                return '_document'
            }
            const _getChecked = (name) => {
                let _isChecked = document.getElementsByName(name)
                for (i = 0; i < _isChecked.length; i++) {
                    if (_isChecked[i].checked) {
                        _isChecked = _isChecked[i].value
                        break;
                    }

                }
                return _isChecked
            }
            const _getSelected = (name) => {
                let _document = document.getElementById(name).selected
                return _document
            }
            const _api_obj = {}
            _api_obj['profile_id'] = localStorage.getItem('profileId')
            _api_obj['answers'] = []
            
                
        
                
            if (ids) {
                ids.map(val => {

                    if (val.type === 'date') {
                        let _temp_storage = {}
                        _temp_storage['id'] = val.id
                        _temp_storage['answer'] = _getValue(val.id)
                        _api_obj['answers'].push(_temp_storage)
                    }
                    else if (val.type === 'file') {
                        let _temp_storage = {}
                        _temp_storage['id'] = val.id
                        _temp_storage['answer'] = _getFile(val.id)
                
                        _api_obj['answers'].push(_temp_storage)
                    }
                    else if (val.type === 'number') {
                        let _temp_storage = {}
                        _temp_storage['id'] = val.id
                        _temp_storage['answer'] = _getValue(val.id)
                        _api_obj['answers'].push(_temp_storage)
                    }
                    else if (val.type === 'radio-group') {
                        let _temp_storage = {}
                        _temp_storage['id'] = val.id
                        _temp_storage['answer'] = _getChecked(val.id)
                        _api_obj['answers'].push(_temp_storage)
                    }
                    else if (val.type === 'text') {
                        let _temp_storage = {}
                        _temp_storage['id'] = val.id
                        _temp_storage['answer'] = _getValue(val.id)
                        _api_obj['answers'].push(_temp_storage)
                    }
                    else if (val.type === 'select') {
                        let _temp_storage = {}
                        _temp_storage['id'] = val.id
                        _temp_storage['answer'] = '_getSelected(val.id)'
                        _api_obj['answers'].push(_temp_storage)
                    }
                    else if (val.type === 'textarea') {
                        let _temp_storage = {}
                        _temp_storage['id'] = val.id
                        _temp_storage['answer'] = _getValue(val.id)
                        _api_obj['answers'].push(_temp_storage)
                    }
                })
            }
            await axios.post(
                    `${Api}api/upload`,
                    formData, {
                    headers: {
                        'Content-Type': 'multipart/form-data',
                        //   Authorization: localStorage.auth_token
                    }
                })
                    // await fetch(`${Api}api/upload`, {
                    //         method: 'POST',
                    //         headers: {
                    //             // 'Content-Type': 'application/json;charset=utf-8',
                    //             'Content-Type': 'multipart/form-data'
                    //         },
                    //         body: formData
                    //     })
                    .then(response => console.log(response.data.data.Location, 'response-profile'))
            await fetch(`${Api}api/postanswers`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify(_api_obj)
            })
                .then(response => response.json())
                .then(res => {
                    console.log('resOfPostAnswers', res)
                    // window.location.pathname="/opportunities"
                })
            console.log(_api_obj, "_api_obj_api_obj_api_obj")
            return false
        }
        // document.getElementById("close").addEventListener("click", async function () {
        //     console.log(ids,"idsidsids")
        //     // alert('sdlkfj')
        //     return false
        // }, false);

        // DISABLE INPUTS

        const disableInputs = (evt) => {
            debugger
            if (evt.which != 8 && evt.which != 0 && evt.which < 48 || evt.which > 57) evt.preventDefault();
        }

        const handleCategory = () => {
            debugger
            localStorage.setItem('_categoryId', document.getElementById('category-select').value)

            // document.getElementById('loading').style.display = "block";

            _fetchQuestions()

            document.getElementById('fill-category').style.display = "none";
            document.getElementById('fill-form').style.display = "block"
            // window.location.hash = "#collapseOne"

        }

        // 
    </script>


    <script>
        // PROFILE IMAGE PREVIEW

        // PROFILE IMAGE
        function readURL(input) {
            debugger
            if (input.files && input.files[0]) {
                // custom_fields_validation()
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#imagePreview').css('background-image', 'url(' + e.target.result + ')');
                    $('#imagePreview').hide();
                    $('#imagePreview').fadeIn(650);
                }
                reader.readAsDataURL(input.files[0]);

            }
        }
    </script>

    <!-- PROFILE SUBMIT -->
    <script>



        // 
        // PROFILE SUBMIT
        // 
        // document.getElementById("deii").addEventListener("click", async function () {
        //     var formData = new FormData();
        //     console.log('vada_yen_machi', document.getElementById('imageUpload').files[0])
        //     formData.append('file-upload', document.getElementById('imageUpload').files[0])

        //     await axios.post(
        //         `${Api}api/upload`,
        //         formData, {
        //         headers: {
        //             'Content-Type': 'multipart/form-data',
        //             //   Authorization: localStorage.auth_token
        //         }
        //     })
        //         // await fetch(`${Api}api/upload`, {
        //         //         method: 'POST',
        //         //         headers: {
        //         //             // 'Content-Type': 'application/json;charset=utf-8',
        //         //             'Content-Type': 'multipart/form-data'
        //         //         },
        //         //         body: bodyUpload
        //         //     })
        //         .then(response => console.log(response, 'response'))

        //     //   alert('sdlhjflsdkfjl')
        //     let _obj = {}
        //     //   "email","mobile","name","photo","dob","city_state","pincode"

        //     var ele = document.getElementsByName('gender');

        //     for (i = 0; i < ele.length; i++) {
        //         if (ele[i].checked) _obj['gender'] = ele[i].value
        //     }
        //     _obj['photo'] = 'ele[i].value '
        //     await ["email", "mobile", "name", "dob", "city_state", "pincode"].map(async (val) => {
        //         _obj[val] = await document.getElementById(val).value
        //         console.log(val)
        //     })
        //     let body = { ..._obj }
        //     await fetch(`${Api}api/updateprofile`, {
        //         method: 'POST',
        //         headers: {
        //             'Content-Type': 'application/json;charset=utf-8'
        //         },
        //         body: JSON.stringify(body)
        //     })
        //         .then(response => response.json())
        //         .then(res => {
        //             localStorage.setItem('profileId', res._val._id)
        //         })
        //     console.log(_obj)
        // }, false);


    </script>
    <script>
        document.getElementById('deii').style.display="none"
    </script>
   
</body>

</html>